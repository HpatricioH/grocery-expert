---
import { getSession } from "auth-astro/server"
import { Icon } from "astro-icon/components"
import Layout from "@/layouts/Layout.astro"
import CldImage from "@/utils/CldImage.astro"
import recipesData from "@/lib/data/recipes.json"

const session = await getSession(Astro.request)
const { item } = Astro.params
const { recipes } = recipesData

const filteredRecipe = recipes.filter(recipe => recipe.id === item)

if (!session) {
  return Astro.redirect("/")
}

---

<Layout title="Grocery Expert Recipes">
  <main class="relative min-h-screen flex flex-col text-black pt-[4rem] bg-white overflow-x-hidden">
    <CldImage src="spaghettiCarbonara" alt="Spaghetti Carbonara" width="16000" height="16000" class="w-full h-full group-hover:scale-105 transition-all duration-500 object-cover"/>
    <div class="rounded-t-3xl bg-white p-4 absolute top-[17rem] [&>h2]:text-text-primary [&>h2]:font-bold [&>h2]:pb-1 [&>h2]:text-lg">
      <h2>Cacao Maca Walnut Milk</h2>
      <p class="[&>p]:text-sm text-text-primary/70">Food {" â€¢ "} 60 mins</p>
      <div class="border border-secondary-color/30 w-full my-2"></div>

      <h2>Description</h2>
      <p class="[&>p]:text-sm text-text-primary/70">
        Your recipe has been uploaded, you can see i on your profile. Your recipe has been uploaded, you can see it in your profile
      </p>
      <div class="border border-secondary-color/30 w-full my-2"></div>

      <h2>Ingredients</h2>
      <div class="flex flex-col gap-4 steps my-3">
        <p class="flex items-center gap-2 ">
          <span class="bg-gray-400/30 step-circle border-0 text-black text-sm">
            <Icon name="check" class="size-5 text-secondary-color"/>
          </span>
          4 Eggs
        </p>
        <p class="flex items-center gap-2 ">
          <span class="bg-gray-400/30 step-circle border-0 text-black text-sm">
            <Icon name="check" class="size-5 text-secondary-color"/>
          </span>
          1/2 Butter
        </p>
        <p class="flex items-center gap-2 ">
          <span class="bg-gray-400/30 step-circle border-0 text-black text-sm">
            <Icon name="check" class="size-5 text-secondary-color"/>
          </span>
          1/2 Butter
        </p>
      </div>
      <div class="border border-secondary-color/30 w-full my-2"></div>

      <h2>Steps</h2>
      <div class="flex flex-col gap-4 steps [&>p]:flex [&>p]:items-center [&>p]:gap-2">
        <p>
          <span class="bg-black step-circle border-0 text-white text-sm">
            1
          </span>
          Your recipe has been uploaded, you can see it on your profile.
        </p>
        <p>
          <span class="bg-black step-circle border-0 text-white text-sm">
            2
          </span>
          Your recipe has been uploaded, you can see it on your profile.
        </p>
        <p>
          <span class="bg-black step-circle border-0 text-white text-sm">
            3
          </span>
          Your recipe has been uploaded, you can see it on your profile.
        </p>
        <p>
          <span class="bg-black step-circle border-0 text-white text-sm">
            4
          </span>
          Your recipe has been uploaded, you can see it on your profile.
        </p>
      </div>
    </div>
  </main>
</Layout>